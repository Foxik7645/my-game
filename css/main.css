:root{ --cream:#F5E6C8; --accent:#ffd56a; --bar:#66e089; }
html, body {height:100%; margin:0; background:#1e1e1e; color:#eee; font-family:'Segoe UI',sans-serif;}
#topbar {position:fixed; top:0; left:0; right:0; background:#2b2b2b; z-index:2000; padding:10px; display:flex; flex-wrap:wrap; align-items:center; gap:12px; box-shadow:0 4px 14px rgba(0,0,0,.4);}
#map {height:100%; margin-top:92px;}
button {cursor:pointer; background:#444; color:#eee; border:none; padding:6px 10px; border-radius:8px; font-size:14px;}
button:hover {background:#666;}
.pixel {font-family:'Press Start 2P', 'VT323', monospace;}
.leaflet-marker-icon, .leaflet-div-icon img {image-rendering: pixelated !important;}
#authBox{margin-left:auto; display:flex; align-items:center; gap:8px}
#userName{color:#bbb; font-size:14px}
#resources {display:flex; flex-wrap:wrap; align-items:center; gap:10px; padding:6px 8px; background:#232323; border:1px solid #3a3a3a; border-radius:10px;}
.res {display:flex; align-items:center; gap:6px; padding:4px 8px; background:#1a1a1a; border:1px solid #3a3a3a; border-radius:8px;}
.res b {font-variant-numeric: tabular-nums;}
#xpWrap{display:flex; align-items:center; gap:10px; min-width:260px}
#xpText{font-variant-numeric: tabular-nums;}
#xpBar{width:220px; height:10px; background:#111; border:1px solid #555; border-radius:999px; overflow:hidden}
#xpBar .fill{height:100%; width:0%; background:var(--bar);}
#toasts {position:fixed; right:12px; bottom:12px; display:flex; flex-direction:column; gap:8px; z-index:2500;}
.toast {background:#2d2b2d; border:1px solid #444; border-radius:10px; padding:10px 12px; box-shadow:0 8px 24px rgba(0,0,0,.35); min-width:280px;}
.toast .actions {margin-top:8px; display:flex; gap:8px; justify-content:flex-end;}
.marker-selected {filter: drop-shadow(0 0 6px rgba(0,255,255,.8));}
.progress-wrap {background:rgba(0,0,0,.6); border:1px solid #777; width:64px; height:8px; border-radius:10px; overflow:hidden; transform: translate(-50%,-130%);}
.progress-bar {height:100%; width:0%; background:var(--bar);}
.worker {width:48px; height:48px; transform: translate(-50%, -50%);}
.worker img {width:48px; height:48px;}
.flip-x {transform: scaleX(-1);}
#editMenu {position:fixed; top:96px; right:10px; background:#2b2b2b; padding:12px; border-radius:12px; display:none; flex-direction:column; gap:8px; z-index:2200; width:340px; box-shadow:0 8px 24px rgba(0,0,0,.35);}
#paintCanvas {image-rendering:pixelated; border:1px solid #555; background:#000; width:480px; height:480px; align-self:center;}
.colorPalette {display:flex; flex-wrap:wrap; gap:4px; margin-top:4px;}
.colorTile {width:18px; height:18px; cursor:pointer; border:1px solid #555;}
#canvasInfo {color:#aaa; font-size:12px;}
#overlay {position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; z-index:2100;}
#marketMenu{
  position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  background:#2b2b2b; border:1px solid #444; border-radius:12px; padding:16px; width:560px; max-width:95vw; z-index:2200;
  box-shadow:0 12px 28px rgba(0,0,0,.4); display:none;
}
.row {display:flex; align-items:center; justify-content:space-between; gap:10px; margin:8px 0;}
.tag {background:#1a1a1a; border:1px solid #3a3a3a; border-radius:8px; padding:6px 10px;}
.seg {display:flex; gap:6px; align-items:center;}
.tabs {display:flex; gap:8px; margin-bottom:8px;}
.tabs button {background:#333}
.tabs .active {background:#555}
#shopPanel{position:fixed; top:88px; left:0; bottom:0; width:330px; background:#222; border-right:1px solid #3a3a3a; z-index:2150; display:none; overflow-y:auto; padding:12px; box-shadow:8px 0 20px rgba(0,0,0,.35);}
#shopHeader{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px;}
.card{position:relative; width:300px; height:438px; margin:10px auto; image-rendering:pixelated; border-radius:12px; box-shadow:0 10px 18px rgba(0,0,0,.35); cursor:pointer; overflow:hidden;}
.card.drov {background:url('./images/CardDrovosek.png') center/cover no-repeat;}
.card.miner {background:url('./images/CardMiner.png') center/cover no-repeat;}
.card.base {background:url('./images/CardBase.png') center/cover no-repeat;}
.card.fermer {background:url('./images/Cardeda.png') center/cover no-repeat;}
.card.houseeat {background:url('./images/CardHouseEat.png') center/cover no-repeat;}
.card .title{position:absolute; top:18px; left:84px; right:16px; font-size:13px; color:var(--cream); text-shadow:0 1px 0 #000;}
.card .cost {position:absolute; top:46px; left:84px; right:16px; font-size:12px; color:var(--cream); text-shadow:0 1px 0 #000;}
.card .desc {position:absolute; left:30px; right:30px; bottom:22px; font-size:12px; line-height:1.25; color:var(--cream); text-shadow:0 1px 0 #000;}
.card .buybar{position:absolute; top:0; left:0; right:0; height:60px; z-index:3; background:linear-gradient(#2b2b2b,#1e1e1e); border-bottom:1px solid #555; display:flex; align-items:center; justify-content:center; gap:10px; transform:translateY(-100%); transition:transform .25s ease;}
.card.active .buybar{transform:translateY(0);}
.buybar .price{font-size:12px; color:var(--accent)}
.card:hover{filter:brightness(1.07);}
.is-hidden {opacity:0; pointer-events:none;}

