<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Map Game — Firebase multiplayer</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
<style>
  :root{ --cream:#F5E6C8; --accent:#ffd56a; --bar:#66e089; }
  html, body {height:100%; margin:0; background:#1e1e1e; color:#eee; font-family:'Segoe UI',sans-serif;}
  #topbar {position:fixed; top:0; left:0; right:0; background:#2b2b2b; z-index:2000; padding:10px; display:flex; flex-wrap:wrap; align-items:center; gap:12px; box-shadow:0 4px 14px rgba(0,0,0,.4);}
  #map {height:100%; margin-top:92px;}
  button {cursor:pointer; background:#444; color:#eee; border:none; padding:6px 10px; border-radius:8px; font-size:14px;}
  button:hover {background:#666;}
  #authBox{margin-left:auto; display:flex; align-items:center; gap:8px}
  #userName{color:#bbb; font-size:14px}
  #resources{display:flex; flex-wrap:wrap; align-items:center; gap:10px; padding:6px 8px; background:#232323; border:1px solid #3a3a3a; border-radius:10px;}
  #xpWrap{display:flex; align-items:center; gap:10px; min-width:260px}
  #xpText{font-variant-numeric: tabular-nums;}
  #xpBar{width:220px; height:10px; background:#111; border:1px solid #555; border-radius:999px; overflow:hidden}
  #xpBar .fill{height:100%; width:0%; background:var(--bar);}
  #toasts {position:fixed; right:12px; bottom:12px; display:flex; flex-direction:column; gap:8px; z-index:2500;}
</style>
</head>
<body>
<div id="topbar">
  <div><b>Map Game — Firebase</b></div>
  <div id="resources"></div>
  <div id="xpWrap">
    <span id="xpText">Lv 1 • 0/500</span>
    <div id="xpBar"><div class="fill"></div></div>
  </div>
  <button id="shopToggle">Магазин</button>
  <button id="marketBtn">Рынок</button>
  <div id="authBox">
    <span id="userName"></span>
    <button id="loginBtn">Войти с Google</button>
    <button id="logoutBtn" style="display:none">Выйти</button>
  </div>
</div>
<div id="map"></div>
<div id="toasts"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>
<script type="module" src="./js/main.js"></script>
</body>
</html>
