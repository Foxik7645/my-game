<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Map Game ‚Äî Firebase multiplayer</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div id="topbar">
  <div><b>Map Game ‚Äî Firebase</b></div>
  <div id="resources"></div>
  <div id="xpWrap">
    <span id="xpText">Lv 1 ‚Ä¢ 0/500</span>
    <div id="xpBar"><div class="fill"></div></div>
  </div>
  <button id="shopToggle">–ú–∞–≥–∞–∑–∏–Ω</button>
  <button id="marketBtn">–†—ã–Ω–æ–∫</button>
  <div id="authBox">
    <span id="userName"></span>
    <button id="loginBtn">–í–æ–π—Ç–∏ —Å Google</button>
    <button id="logoutBtn" style="display:none">–í—ã–π—Ç–∏</button>
  </div>
</div>

<!-- –†–µ–¥–∞–∫—Ç–æ—Ä -->
<div id="editMenu">
  <h4>–†–µ–¥–∞–∫—Ç–æ—Ä —Å–ø—Ä–∞–π—Ç–∞</h4>
  <canvas id="paintCanvas" width="60" height="60"></canvas>
  <div id="canvasInfo">–õ–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ: 60√ó60</div>
  <div class="colorPalette" id="palette"></div>
  <div style="display:flex; gap:8px; justify-content:flex-end;">
    <button id="saveSprite">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <button id="closeEditor">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<!-- –†—ã–Ω–æ–∫ -->
<div id="overlay" style="display:none"></div>
<div id="marketMenu" style="display:none">
  <h3>–†—ã–Ω–æ–∫</h3>
  <div class="tabs">
    <button id="tabWood" class="active">ü™µ –î–µ—Ä–µ–≤–æ</button>
    <button id="tabStone">ü™® –ö–∞–º–µ–Ω—å</button>
    <button id="tabCorn">üåΩ –ö—É–∫—É—Ä—É–∑–∞</button>
  </div>
  <div class="row">
    <div>–ö—É—Ä—Å: <span id="m-rate" class="tag">10 ü™µ = 50 üí∞</span></div>
    <div>–£ –≤–∞—Å: <span id="m-have" class="num">0</span></div>
  </div>
  <div class="row">
    <div>–ü—Ä–æ–¥–∞—Ç—å –Ω–∞–±–æ—Ä–æ–≤ (–ø–æ 10):</div>
    <div class="seg">
      <button id="m-dec">‚àí1</button>
      <span id="m-packs" class="tag num" style="min-width:48px;text-align:center">0</span>
      <button id="m-inc">+1</button>
      <button id="m-max">MAX</button>
    </div>
  </div>
  <div class="row">
    <div>–ü–æ–ª—É—á–∏—Ç–µ:</div>
    <div><b id="m-get" class="num">0</b> üí∞</div>
  </div>
  <div class="actions">
    <button id="m-cancel">–û—Ç–º–µ–Ω–∞</button>
    <button id="m-sell">–ü—Ä–æ–¥–∞—Ç—å</button>
    <button id="m-sell-all">–ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë</button>
  </div>
</div>

<!-- –ú–∞–≥–∞–∑–∏–Ω -->
<aside id="shopPanel">
  <div id="shopHeader">
    <h3 class="pixel">–ú–∞–≥–∞–∑–∏–Ω</h3>
    <button id="shopClose">√ó</button>
  </div>
  <div class="card drov pixel" data-type="drovosekdom" data-cost="100" data-icon="./images/DrovosekDom.png" data-name="DrovosekDom">
    <div class="buybar"><span class="price">100 üí∞</span><button class="buyBtn">–ö—É–ø–∏—Ç—å</button></div>
    <div class="title">DrovosekDom</div>
    <div class="cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 100</div>
    <div class="desc">–î–æ–º –¥—Ä–æ–≤–æ—Å–µ–∫–∞. –†–∞–±–æ—á–∏–µ –¥–æ–±—ã–≤–∞—é—Ç –¥–µ—Ä–µ–≤–æ —Ä—è–¥–æ–º –∏ –Ω–æ—Å—è—Ç –≤ –¥–æ–º.</div>
  </div>
  <div class="card miner pixel" data-type="minehouse" data-cost="100" data-icon="./images/Minehouse.png" data-name="Minehouse">
    <div class="buybar"><span class="price">100 üí∞</span><button class="buyBtn">–ö—É–ø–∏—Ç—å</button></div>
    <div class="title">Minehouse</div>
    <div class="cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 100</div>
    <div class="desc">–î–æ–º —à–∞—Ö—Ç—ë—Ä–∞. –ü–æ–±–ª–∏–∑–æ—Å—Ç–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –∫–∞–º–Ω–∏.</div>
  </div>
  <div class="card base pixel" data-type="base" data-cost="0" data-icon="./images/Base.png" data-name="–ë–∞–∑–∞">
    <div class="buybar"><span class="price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span><button class="buyBtn">–ü–æ—Å—Ç–∞–≤–∏—Ç—å</button></div>
    <div class="title">–ë–∞–∑–∞</div>
    <div class="cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 0</div>
    <div class="desc">–ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞. –î–∞—ë—Ç –∑–æ–Ω—É —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ (–ø—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫).</div>
  </div>
  <div class="card fermer pixel" data-type="fermerdom" data-cost="100" data-icon="./images/FermerDom.png" data-name="FermerDom">
    <div class="buybar"><span class="price">100 üí∞</span><button class="buyBtn">–ö—É–ø–∏—Ç—å</button></div>
    <div class="title">FermerDom</div>
    <div class="cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 100</div>
    <div class="desc">–î–æ–º —Ñ–µ—Ä–º–µ—Ä–∞. –†–∞–±–æ—á–∏–µ —Å–æ–±–∏—Ä–∞—é—Ç –∫—É–∫—É—Ä—É–∑—É —Ä—è–¥–æ–º.</div>
  </div>
  <div class="card houseeat pixel" data-type="houseeat" data-cost="0" data-icon="./images/HouseEat.png" data-name="HouseEat">
    <div class="buybar"><span class="price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span><button class="buyBtn">–ü–æ—Å—Ç–∞–≤–∏—Ç—å</button></div>
    <div class="title">HouseEat</div>
    <div class="cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 0</div>
    <div class="desc">–ö—É—Ö–Ω—è. –ì–æ—Ç–æ–≤–∏—Ç 10 üçî –∑–∞ 5üåΩ + 50üí∞. –í—Ä–µ–º—è –≥–æ—Ç–æ–≤–∫–∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —Å —É—Ä–æ–≤–Ω–µ–º.</div>
  </div>
</aside>

<div id="map"></div>
<div id="toasts"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>

<script type="module" src="js/main.js"></script>
</body>
</html>
